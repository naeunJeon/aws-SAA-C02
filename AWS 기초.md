
AWS 5대 원칙
1. 보안
- 보안과 규정준수는 AWS와 고객의 공동 책임
- AWS는 클라우드 서비스의 물리적 인프라, 소프트웨어 및 네트워킹 기능이 포함
- 고객은 클라우드 서비스의 구성, 애플리케이션 소프트웨어 및 민감한 데이터 관리에 대한 보안책임이 있음
1-1. 멘탈 모델
- 클라우드에서의 보안을 고려할 때는 제로트러스트 모델을 도입하는 것이 유용
- 모든 애플리케이션 구성 요소 및 서비스는 별개이며 잠재적으로 악의적인 엔터티로 간주
- 기반 네트워크 패브릭, 리소스에 액세스하는 모든 에이전트 및 서비스 내부에서 실행되는 소프트웨어가 포함


1-2. 개념
- 제로트러스트의 관점에서 보안은 모든 시스템 수준에 보안 조치를 적용하는 것을 의미
a. Identity and Access Mangagement(IAM)
IAM은 시스템에서 ID 및 액세스를 추적하는 서비스, AWS에서 관리되며 액세스는 AWS 내에서 에이전트에 대한 액세스 경계를 적용하는 IAM 정책을 사용하여 관리
구성요소
'주체'는 권한이 제공되는 대상을 지정 -> ID 기반 정책
'작업'은 수행되는 것을 지정
'리소스'는 액세스되는 속성을 지정 -> 리소스 기반 정책(s3, kms, ses에만 리소스 기반 정책이 적용됨)
IAM에 제로 트러스트 모델을 적용하는 것은 최소 권한 원칙을 사용하는 것을 의미
요점
- IAM 정책은 AWS내에서 엔터티의 액세스 경계를 명시함
- IAM 정책은 주체, 작업 및 리소스로 구성
- IAM 정책을 사용하여 주체에 최소한 권한을 적용할 수 있음
- IAM에는 ID 기반 및 리소스 기반 등 여러 정책 유형이 있음
- IAM은 지정된 리소스에 적용할 수 있는 모든 정책 유형에 대한 평가를 기반으로 액세스를 평가함

b. 네트워크 보안
네트워크 보안에는 네트워크 및 네트워크에 액세스할 수 있는 리소스의 액세스 및 사용성을 보호하는 시스템, 구성 또는 프로세스가 포함됨
네트워크 보안에 대한 제로 트러스트 접근법에는 네트워크의 모든 레이어에 보안 제어를 적용하는 심층적 방어 접근법이 포함됨

네트워크 수준 보안
AWS에서 기본 네트워크 수준은 VPC
VPC일부 구성요소
- 서브넷 : VPC 내부의 IP 주소 범위
- 라우팅 테이블 : 트래픽이 이동하는 위치를 결정하는 규칙 집합
- 인터넷 게이트웨이 : VPC 내부의 리소스와 인터넷 사이에서 통신을 할 수 있게 해주는 구성 요소
VPC에서 트래픽을 보호하려면, 리소스를 공용리소스와 내부리소스로 나눌수 있음, 공격을 줄이기 위해서, 모든 인터넷트래픽을 처리하는 ALB 같은 프록시 서비스를 사용할 수 있음
그러면 서버 및 데이터베이스와 같은 모든 내부 서비스는 직접적인 공용 인터넷 액세스가 차단 된 내부 서브넷 내부에서 프로비저닝 될 수 있음

VPC뿐만 아니라 WAF를 사용하여 네트워크에 대한 트래픽을 추가적으로 제한할 수 있음

리소스 수준 보안
개별 AWS 리소스에도 사용자가 구성이 가능한 네트워크 보안 제어를 적용할 수 있음, 가장 일반적인 제어는 보안그룹임, 보안그룹은 리소스로 유입 및 유출되는 트래픽 흐름을 적용하기 위해 사용할 수 있는 가상 방화벽, 보안그룹을 사용하면 특정 포트 또는 인스턴스에서 신뢰할 수 있는 소스로부터 트래픽만 허용할 수 있음, EC2 인스턴스, RDS 인스턴스 및 람다 등의 리소스에 보안 그룹을 연결할 수 있음

요점
- 네트워크 보안에는 네트워크 및 네트워크에 액세스할 수 있는 리소스의 액세스 및 사용성을 보호하도록 설계된 메커니즘이 포함됨
- 네트워크 보안에 대한 제로 트러스트 접근법에는 네트워크의 모든 레이어에 심층적인 방어를 구축하는 것이 포함됨
- VPC 및 WAF는 네트워크 수준에 보안조치를 적용할 수 있도록 허용함
- 보안 그룹은 리소스 수준에 보안조치를 적용할 수 있도록 허용함

c. 데이터 암호화
데이터 암호화는 데이터의 암호를 해독하기 위해 필요한 키가 없는 제3자가 이해할 수 없는 방식으로 정보를 암호화하는 프로세스
데이터에 제로 트러스트 모델을 적용하는 것은 모든곳에 있는 전송중 및 저장중 데이터 모두를 암호화하는 것

전송 중 암호화
데이터가 시스템 사이에서 이동할 때 데이터를 암호화, AWS 내의 모든 스토리지 및 데이터베이스 서비스는 전송 중 데이터 암호화를 지원하는 HTTP 엔드포인트를 제공,
또한 AWS는 사용자 서비스에 전송 중 암호화를 적용할 수 있는 네트워크 서비스 제공, ALB를 사용하면 사용자의 엔드포인터에 HTTPS 연결을 적용할 수 있음 

저장 중 암호화
저장 중 암호화에서는 시스템 내의 데이터를 암호화, 모든 AWS 스토리지 및 데이터베이스 서비스는 저장 중 암호화를 지원, 이러한 서비스 중 대부분은 암호화가 기본적으로 수행
암호화를 위한 추가 비용 및 데이터를 암호화하기 위한 성능 저하가 없음

대부분의 스토리지 및 데이터베이스 서비스는 KMS와 직접 통합됨, 이는 데이터를 암호화하기 위해 고객관리키(CMK)를 생성할 수 있도록 해주는 중앙 키관리 서비스임

CMK를 사용하면 암호화 이상의 추가 기능이 제공됨, 그러한 기능에는 자체 사용자 지정 키 저장소 사용, AWS CloudTrail 과 통합하여 암호화된 리소스에 대한 감사 추적 생성 및 자동 키 회전 적용 등이 있음

요점
- 암호화는 올바른 키를 가지고 있는 당사자만 정보의 암호를 해독할 수 있는 방식으로 정보를 암호화하는 프로세스
- 전송 중 저장 중 데이터를 암호화하여 데이터의 보안을 유지할 수 있음
- AWS의 모든 스토리지 밑 데이터베이스 서비스는 전송 중 및 저장 중 암호화를 제공
- ALB등 AWS 네트워킹 서비스를 사용하면 자체 서비스에 전송 중 암호화를 적용할 수 있음
- CMK 를 사용하면 감사 추적 생성, 자체 사용자 지정 키 사용 및 자동 키 회전과 같은 고급 기능을 활용할 수 있음

2. 성능 효율성
성능 효율성 원칙은 클라우드에서 서비스를 효율적이고 확장 가능하도록 실행하는 방법에 중점을 줌, 클라우드는 모든 규모의 트래픽을 처리할 수 있는 수단을 제공하는 반면, 이를 위해서는 확장을 염두하고 서비스를 선택 및 구성해야 함

2-1. 멘탈 모델
"소"
클라우드에서 서버는 몇 초 내 자동으로 프로비저닝될 수 있는 상용리소스임, 서비스의 작동에서 필수적인 단일 서버는 없음

2-2. 개념
- 서버관리의 "애완동물모델"에서는 여러 워크로드에 대하여 동일한 유형의 서버를 사용하는 것이 매우 일반적
- 이로 인해 다른 시스템을 주문하고 프로비저닝하는 것은 매우 번거로움
- "소 모델"에서는 프로비저닝이 빠르고 저렴하고 워크로드와 가장 일치하는 서버 유형을 자유롭게 선택할 수 있음
- "소 모델"에서는 서비스를 확장하는 것도 편리, 모든 서버가 호환되고 빠르게 배포할 수 있음, 더 많은 서버를 추가하여 용량을 빠르게 확장할 수 있음

성능 효율성에서는 다음의 두가지 개념에 중점을 둬야함

a. 셀렉트
AWS에서의 셀렉트는 워크로드에 가장 적합한 서비스를 선택할 수 있는 기능, AWS는 24개 이상의 범주에서 175개 이상의 서비스를 제공하므로 서비스의 선택폭이 매우 광범위함, 선택을 통해 성능을 달성하는 것은 작업에 적합한 도구를 선택할 수 있다는 의미
일반적인 워크로드의 경우 컴퓨팅, 스토리지, 데이터베이스 및 네트워크의 AWS 주요 4개 서비스 범주에서 선택하면 됨
- 컴퓨팅은 데이터를 처리하는 서비스
- 스토리지는 데이터를 정적으로 저장하는 서비스
- 데이터베이스는 데이터를 구조화하여 저장하는 서비스
- 네트워크는 데이터의 이동 방법과 관련한 서비스

*올바른 선택 방법 3가지*
서비스 유형
"컴퓨팅" 서비스를 선택할 때는 VM 기반, 또는 서비리스 기반 컴퓨팅 중에서 결정할 수 있음
- VM 기반 컴퓨팅은  대부분의 사용자에게 가장 익숙한 멘탈 모델이지만, 비용과 유지관리가 더 많이 필요할 수 있음
- 컨테이너 기반 컴퓨팅을 사용하면 워크로드를 세밀하게 분할하고 빠르게 확장할 수 있지만, 추가적인 구성 및 오케스트레이션 복잡성이 나타날 수 있음
- 서버리스 기반 컴퓨팅에서는 대부분의 관리 및 확장 복잡성이 사라지지만, 하드 시스템 제한이 있고 새로운 도구 체인 및 프로세스를 도입해야할 수 있음

"스토리지" 서비스를 선택할때는 파일스토어, 블록스토어, 객체 스토어 또는 아카이브 스토어가 필요한지의 여부를 결정해야함
- EBS 등의 블록스토리지는 단일 EC2 인스턴스에서 제공되는 데이터를 유지하는 데 적합함
- EFS 등의 파일 시스템은 동일 데이터에 다중 클라이언트 액세스를 제공하는데 적합함
- S3 등의 객체 스토어는 많은 수의 클라이언트가 액세스 해야하는 데규모 Blob에 적합함
- S3 Glacier 등의 아카이브 스토리지는 자주 액세스 하지 않는 라지 데이터에 적합

"데이터베이스" 서비스를 선택할 떄는 관계형 데이터베이스, 비관계형 데이터베이스, 데이터 웨어하우스 솔루션 또는 데이터 인덱싱 및 검색 솔루션이 필요한지의 여부를 결정해야함
- 관계형 데이터베이스를 사용하면 속성의 조인 및 ACID를 수행할 수 있지만, 성능과 데이터 스토리지의 상한이 적용됨
- 비관계형 데이터베이스는 스키마가 보다 유연하고 관계형 데이터베이스에 비해 상한이 높지만, 조인 및 전체 ACID기능이 일반적으로 부족
- 데이터 웨어하우스 솔루션을 사용하면 페타바이트 규모의 구조화된 데이터에 빠르게 액세스할 수 있어 라지 분석이 가능
- 데이터 인덱싱 및 검색 솔루션을 사용하면 매우 다양한 리소스의 데이트를 인덱싱 및 검색할 수 있음

*관리수준*
서비스 유형을 결정한 후에는 특정 서비스로 더 좁혀야한다, 때때로 AWS는 특정 서비스 유형에서 여러 서비스를 제공하기도 함, 동일한 유형의 다양한 AWS간의 주요 차이점은 관리수준에서 찾을수 있다.

컴퓨팅 서비스를 사용하며 VM 유형을 결정한 경우에는 EC2, Lightsail, Elastic Beanstalk 중에서 선택해야함,
EC2를 직접 사용하면 최대한의 제어가 가능하지만 관리가 가장 적다
Lightsail을 선택하면 훨씬 더 관리되는 환경을 위해 일부 사용자 지정 작업이 수행됨
Elastic Beanstalk는 서비스 아키텍처를 위한 명확한 프레임워크를 제공하지만 구성을 통해 사용자 지정할 수 있음

데이터베이스 서비스를 사용할 경우에는 관계형 타입에 따라 결정한다, RDS와 Aurora 사이에서 선택해야 한다
RDS는 기본 데이터베이스에 대한 더 많은 제어를 제공하며 대부분의 관계형 데이터베이스에서 사용할 수 있음
Aurora는 특정 버전의 MySQL 및 PostgreSQL에서만 작동하지만 기본 스토리지 관리를 처리하고 클러스터링 지원이 내장되어 있다.

스토리지 서비스를 사용할 때는 특정 유형(예: 객체 저장용 S3, 파일 저장용 EFS)에 대해 하나의 서비스만 있는 경향이 있기 때문에 서비스를 선택하기가 더 쉽다.

*구성*
서비스를 결정한 후에는 구성방법을 추가로 결정해야함, 구성은 달성하려는 특정 성능 특성에 따라 다르며 각 서비스 버주에 따라 다름
컴퓨팅 서비스의 성능 특성을 평가할 때 메모리 및 컴퓨팅 요구 사항을 살펴보는 것이 좋음
- VM 기반 컴퓨팅을 사용하는 경우 메모리와 CPU는 인스턴스 크기 및 인스턴스 제품군 영향을 받음
- 컴테이너 기반 컴퓨팅을 사용하는 경우 메모리와 CPU를 개별적으로 설정할 수 있음
- 서버리스 기잔 컴퓨팅을 사용하는 경우 메모리만 직접 설정할 수 있음, 컴퓨팅 값은 사용 가능한 메모리 양에 비례하여 증가

워크로드에 따라 네트워크 용량 및 인스턴스 스토리지와 같은 특정 리소스의 가용성과 같이 관심을 가질수 있는 추가 리소스제약이 있음

스토리지 서비스의 성능 특성을 평가할 때 대기시간, 처리량 및 IOPS(I/O 특성 및 모니터링) 요구사항을 고려해야한다
- 블록 스토리지 서비스를 사용하는 경우
 - 지연시간은 선택한 볼륨유형의 영향을 받음
 - 처리량은 대부분의 볼륨 유형에서 볼륨크기에 비례
 - IOPS 용량은 대부분 볼륨 유형에서 볼륨크기에 비례
- 파일 시스템 서비스를 사용하는 경우
 - 지연시간 및 IOPS는 선택한 성능 모두의 영향을 받음
 - 처리량은 프로비저닝된 처리량 사용 선택에 따라 달라짐
- 오브젝트 저장소를 사용하는 경우
 - 지연 시간은 버킷 끝점까지의 지리적 거리의 영향을 받음
 - 처리량은 멀티 파트 업로드와 같은 처리량 최적화 API 사용의 영향을 받음
 - IOPS는 구성할 수 없음
- 아카이브 저장소를 사용하는 경우
 - 대기 시간은 버킷 엔드포인트까지의 지리적 거리 및 선택한 검색 방법에 의해 영향을 받음
 - 처리량은 멀티파트 업로드 등과 같이 처리량에 최적화된 API의 사용 여부에 의해 영향을 받음
 - IOPS 는 구성할 수 없음

데이터베이스 서비스의 성능 특성을 평가할 때는 리소스요구사항 (cpy, 메모리, 스토리지)등을 고려해야함
- 관계형 데이터베이스를 사용하는 경우
 - 리소스 기능은 선택한 EC2 인스턴스에 의해 결정
- DynamoDB와 같은 비관계형 데이터베이스를 사용하는 경우
 - 리소스 기능은 프로비저닝된 용량과 같은 구성 옵션에 의해 결정
- Redshift와 같은 데이터 웨어하우스 솔루션을 사용하는 경우
 - 리소스 기능은 선택한 기본 EC2 인스턴스에 의해 결정
- Elasticsearch Service와 같은 인덱싱 솔루션을 사용하는 경우
 - 리소스 기능은 선택한 EC2 인스턴스에 의해 결정됩니다.

요점
- AWS는 원하는 결과를 달성하기 위한 다양한 서비스와 방식을 제공한다
- AWS에서 워크로드를 구현하기 위해서는 컴퓨팅, 스토리지, 데이터베이스 및 네트워크 범할 수 있습니다.
- 각 유형 내에서는 원하는 관리 수준에 따라 특정 서비스를 선택할 수 있음
- 각 서비스 내에서는 달성하려는 특정 성능 특성에 따라 특정 구성을 선택할 수 있음

b. 확장

3. 안정성
4. 운영 우수성
5. 비용 최적화



참고
https://aws.amazon.com/ko/getting-started/fundamentals-core-concepts/?e=gs2020&p=gsrc

제로트러스트 : 기본적으로 기업 내/외부를 막론하고 적절한 인증 절차 없이는 그 누구도 신뢰해서는 안되며, 시스템에 접속하고자 하는 모든 것에 접속 권한을 부여하기 전 신원 확인 과정을 거쳐야 한다는 것
(https://blog.lgcns.com/1952)

kms : AWS KMS(Key Management Service) 를 사용하면 손쉽게 암호화 키를 생성 및 관리하고 다양한 aws 서비스와 애플리케이션의 사용을 제어할 수 있음
(https://docs.aws.amazon.com/ko_kr/kms/latest/developerguide/concepts.html)

ses : AWS SES(Simple Email Service) 는 개발자가 모든 애플리케이션 안에서 이메일을 보낼수 있는 경제적이고, 유연하며, 확장가능한 이메일 서비스

VPC : AWS VPC(Virtual Private Cloud) 를 사용하면 AWS 클라우드에서 논리적으로 격리된 공간을 프로비저닝하여 고객이 정의하는 가상 네트워크에서 AWS 리소스를 시작할 수 있음
(https://aws.amazon.com/ko/vpc/)

ALB : AWS ALB (Application Load Balancer) 는 OSI 모델의 일곱 번째 계층인 애플리케이션 계층에서 작동함, 요청을 받으면 우선 순위에 따라 리스터 규칙을 평가하여 적용할 규칙을 결정한 다음, 규칙 작업의 대상 그룹에서 대상을 선택
(Elastic Load Balancing 세가지 유형중 하나, NLB, CLB 가 있음)
(https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/application/introduction.html)

WAF : AWS WAF (Web Application Firewall)는 가용성에 영향을 주거나, 보안을 위협하거나, 리소스를 과도하게 사용하는 일반적인 웹 공격으로부터 웹 애플리케이션이나 API를 보호하는 데 도움이 되는 웹 애플리케이션 방화벽

AWS CloudTrail : AWS 계정의 정책, 규정 준수, 운영 감사, 위험 감시를 지원하는 서비스로 CloudTrail을 사용하면 AWS 인프라에서 계정 활동과 관련된 작업을 기록하고 지속적으로 모니터링하며 보관

EBS : AWS EBS (Elastic Block Store) 볼륨은 내구성이 있는 블록 수준 스토리지 디바이스, 인스턴스를 연결하는 것이 가능, 볼륨을 인스턴스에 연결하면 물리적 하드 드라이브처럼 사용할수 있음, 
(https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/ebs-volumes.html)

EFS : AWS EFS (Elastic File System) 클라우드 서비스와 온프레미스 리소스에서 사용할 수 있는, 간단하고 확장 가능하며, 탄력적인 완전관리형 NFS 파일 시스템을 제공, 애플리케이션을 중단하지 않고 온디맨드 방식으로 페타바이트 규모까지 확장하도록 구축되어, 파일을 추가하고 제거할 때 자동으로 확장하고 축소하며 규모에 맞게 용량을 프로비저닝 관리할 필요가 없음
(https://aws.amazon.com/ko/efs/)

EC2 vs lightsail : https://boomkim.github.io/2019/03/21/lightsail-vs-ec2/

AWS Elastic Beanstalk : Java, .NET, PHP, Node.js, Python, Ruby, Go, Docker를 사용하여 Apache, Nginx, Passenger, IIS와 같은 친숙한 서버에서 개발된 웹 애플리케이션 및 서비스를 간편하게 배포하고 조정할 수 있는 서비스
코드를 업로드하기만 하면 Elastic Beanstalk가 용량 프로비저닝, 로드 밸런싱, Auto Scaling부터 시작하여 애플리케이션 상태 모니터링에 이르기까지 배포를 자동으로 처리해줌

Amazon DynamoDB : 완전관리형 NoSQL 데이터베이스 서비스로서 원활한 확장성과 함께 빠르고 예측 가능한 성능을 제공
Amazon Redshift : 신속하며 완벽하게 관리되는 페타바이트 규모의 데이터 웨어하우스 서비스
Amazon Elasticsearch Service(Amazon ES) : 널리 사용되는 오픈 소스 검색 및 분석 엔진인 Elasticsearch를 손쉽게 배포, 운영 및 확장할 수 있게 해주는 관리형 서비스입니다. 또한, Amazon ES는 보안 옵션, 고가용성, 데이터 내구성을 제공하며 Elasticsearch API에 직접 액세스